<html>

<head>
</head>

<body>
    <script src="https://threejs.org/build/three.min.js"></script>
    <script src="https://conjs.cloudflare.com/ajax/libs/three.js/110/three.min.js"></script>
    <script src="https://threejs.org/examples/js/controls/OrbitControls.js"></script>
    <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>

    <script>
        var camera, scene, renderer , controls;
        var car, theta = 0;

        init();
        animate();

        function init() {
            //set scene renderer camera
            scene = new THREE.Scene();

            renderer = new THREE.WebGLRenderer();
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setClearColor(0x888888);
            document.body.appendChild(renderer.domElement);

            camera = new THREE.PerspectiveCamera(80, window.innerWidth / window.innerHeight, 1, 1000);
            camera.position.set( 0 , 80 , 150);
            
            controls = new THREE.OrbitControls(camera, renderer.domElement);



            var gridXZ = new THREE.GridHelper(200, 20, 'red', 'white');
            scene.add(gridXZ); //定義網格

            ////////////////////////////////////////////////////////////////

            triangle = new THREE.Geometry();
            triangle.vertices.push(
                new THREE.Vector3(30, 0, 0),
                new THREE.Vector3(0, 15, 0),
                new THREE.Vector3(0, 0, -15),
                new THREE.Vector3(0, 0, 15)
            );
            triangle.faces.push(
                new THREE.Face3(0, 1, 3),
                new THREE.Face3(1, 0, 2),
                new THREE.Face3(1, 2, 3),
                new THREE.Face3(2, 0, 3)
            );

            triangle.computeFaceNormals();
            triangle.computeVertexNormals();

            car = new THREE.Mesh(triangle, new THREE.MeshNormalMaterial());
            scene.add(car);
        }

        function onWindowResize() {

            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        }


        function animate() {

            renderer.render(scene, camera);

            if (!toggle) theta += 0.01;
            car.rotation.y = Math.PI / 2 + theta;
            car.position.set(50 * Math.cos(theta), 0, -50 * Math.sin(theta));
            if (changeCamera) {
                //第三人稱
                var d = Math.PI / 6;
                var h = 50;
                camera.position.set(50 * Math.cos(theta - d), h, -50 * Math.sin(theta - d));
                camera.lookAt(car.position);
            }
            requestAnimationFrame(animate);
        }

    </script>
</body>

</html>
